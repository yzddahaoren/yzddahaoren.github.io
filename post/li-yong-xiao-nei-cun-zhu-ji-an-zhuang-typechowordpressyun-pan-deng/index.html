<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>yzd-gridea</title>
<meta name="description" content="记录 :  思考 : 慎言" />
<link rel="shortcut icon" href="https://g.yzddhr.ltd/favicon.ico?v=1586574732000">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://g.yzddhr.ltd/styles/main.css">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125127562-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125127562-1');
</script>


  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://g.yzddhr.ltd">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://g.yzddhr.ltd/images/avatar.png?v=1586574732000" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">yzd-gridea</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            文章目录
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85">环境安装</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8">使用</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AE%E4%BC%AA%E9%9D%99%E6%80%81">设置伪静态</a></li>
<li><a href="#%E7%AE%A1%E7%90%86%E5%92%8C%E5%8D%B8%E8%BD%BD">管理和卸载</a></li>
<li><a href="#%E5%85%B6%E4%BB%96">其他</a>
<ul>
<li><a href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95">解决办法</a><br>
*
<ul>
<li><a href="#3-update-the-required-packages">3. Update the required packages</a></li>
<li><a href="#4-restart-the-web-server">4. Restart the Web Server</a></li>
<li><a href="#5-update-php">5. Update PHP</a></li>
<li><a href="#6-search-all-the-available-packages-containing-mysql">6. Search all the available packages containing MySQL</a></li>
<li><a href="#7-restart-apache">7. Restart Apache</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu" style="animation-delay: 0.6000000000000001s">
          关于
        </a>
      
    
      
        <a href="/tag/9CTakvPYn/" class="menu" style="animation-delay: 0.8s">
          音乐
        </a>
      
    
      
        <a href="https://g.yzddhr.me/post/friends/" class="menu" style="animation-delay: 1s">
          友链
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700">Powered by <a href="https://github.com/yzddahaoren" target="_blank">yzddhr@2019</a></div>
    <a class="rss" href="https://g.yzddhr.ltd/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">利用小内存主机安装typecho,wordpress,云盘等</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2020-01-06 / 3 min read
        </div>
        
        <div class="post-content yue">
          <blockquote>
<p>支持安装的程序有<strong>Typecho/WordPress/Zblog/Kodexplorer</strong><br>
支持的功能有备份和还原</p>
</blockquote>
<h2 id="环境安装">环境安装</h2>
<ol>
<li>项目地址:https://github.com/dylanbai8/Onekey_Caddy_PHP7_Sqlite3</li>
<li>下载相关的脚本:</li>
</ol>
<pre><code>wget -N --no-check-certificate git.io/c.sh &amp;&amp; chmod +x c.sh &amp;&amp; bash c.sh
</code></pre>
<p><strong>程序会自动给你安装好<code>php,caddy,sqlite</code>等环境</strong></p>
<h2 id="使用">使用</h2>
<p>可以使用以下</p>
<pre><code>#一键安装typecho博客
bash c.sh -t

#一键安装wordpress博客
bash c.sh -w

#一键安装zblog博客
bash c.sh -z

#一键安装kodexplorer可道云
bash c.sh -k

#一键安装laverna印象笔记
bash c.sh -l

#一键整站备份（一键打包/www网站目录、含数据库）
bash c.sh -a

#一键安装v2ra*
bash c.sh -v

#一键安装rinetd bbr端口加速
bash c.sh -b
</code></pre>
<h2 id="设置伪静态">设置伪静态</h2>
<blockquote>
<p>Caddy配置文件路径/etc/dylanbai8/caddy/Caddyfile。</p>
</blockquote>
<ol>
<li>编辑配置文件</li>
</ol>
<p><code>vi /etc/dylanbai8/caddy/Caddyfile</code></p>
<ol start="2">
<li>写入内容</li>
</ol>
<pre><code>#Wordpress伪静态
rewrite {
  if {path} not_match ^\/wp-admin
  to {path} {path}/ /index.php?{query}
}

#Typecho伪静态
rewrite {
    if {path} not_match ^\/admin
    to {path} {path}/ /index.php?{query}
 }
</code></pre>
<ol start="3">
<li>重启<code>caddy</code><br>
<code>systemctl restart caddy</code></li>
</ol>
<h2 id="管理和卸载">管理和卸载</h2>
<ul>
<li>卸载</li>
</ul>
<pre><code>#卸载caddy
bash c.sh -unc

#卸载php+sqlite
bash c.sh -unp

#卸载v2ra*
bash c.sh -unv

#卸载rinetdbbr
bash c.sh -unb
</code></pre>
<ul>
<li>相关的管理命令</li>
</ul>
<pre><code>启动：systemctl start caddy
停止：systemctl stop caddy
重启：systemctl restart caddy

Caddy配置文件位置：/etc/dylanbai8

网站目录：/www
</code></pre>
<h2 id="其他">其他</h2>
<p>在安装typecho可能会报错，因为安装最新版本的wordpress的问题<br>
没有php-mysql插件</p>
<h3 id="解决办法">解决办法</h3>
<h5 id="3-update-the-required-packages">3. Update the required packages</h5>
<p>If your are running an <a href="https://www.rosehosting.com/ubuntu-hosting.html">Ubuntu VPS</a> and <code>PHP 7</code>, then run the following commands:</p>
<pre><code>apt-get update
apt-get install php7.0-mysql
</code></pre>
<h5 id="4-restart-the-web-server">4. Restart the Web Server</h5>
<p>Then restart your Apache service for the changes to take effect, or if you are using Nginx + PHP-FPM, then restart the PHP-FPM service.</p>
<h5 id="5-update-php">5. Update PHP</h5>
<p>In case you are running <code>PHP 5</code>, run the following commands:</p>
<pre><code>apt-get update
apt-get install php-mysql
</code></pre>
<p>Restart the appropriate service for the changes to take effect.</p>
<h5 id="6-search-all-the-available-packages-containing-mysql">6. Search all the available packages containing MySQL</h5>
<p>To search all the available packages containing <code>mysql</code>, you can use this command:</p>
<pre><code>apt-cache search mysql
</code></pre>
<p>On the other hand, if you are running a <a href="https://www.rosehosting.com/centos-hosting.html">CentOS VPS</a> and you have <code>PHP 7</code> installed on the server, then run the following commands to fix the problem:</p>
<pre><code>yum update
yum install php70w-mysql
</code></pre>
<h5 id="7-restart-apache">7. Restart Apache</h5>
<p>Restart Apache or the PHP-FPM service in case you are using Nginx + PHP-FPM as a web server.</p>
<p>If you have <code>PHP 5</code> installed on your CentOS server, run the following commands:</p>
<pre><code>yum update
yum install php-mysql
</code></pre>
<p>Restart the appropriate service for the changes to take effect.</p>
<p>To search all the available packages containing <code>mysql</code>, you can use the following command:</p>
<pre><code>yum search mysql
</code></pre>
<p>Once you install the MySQL extension for PHP, you can return back to your WordPress setup. If the installation went OK, the message about the missing MySQL extension should not be presented to you. You can now continue with your WordPress setup.</p>

        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://g.yzddhr.ltd/tag/ymHPLYauhe">
            <span class="flex-auto">网站搭建</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://g.yzddhr.ltd/tag/pY9qwZ9J9H">
            <span class="flex-auto">blog</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://g.yzddhr.ltd/post/2020-ke-yong-de-bai-du-yun-xia-zai-qi">
                <h3 class="post-title">
                  <i class="remixicon-arrow-left-line"></i>
                  2020可用的百度云下载器
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://g.yzddhr.ltd/post/geng-xin-hou-de-gridea-de-shi-yong-ti-yan">
                <h3 class="post-title">
                  更新后的gridea的使用体验
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '54dc0370b7c1bea2e1a8',
    clientSecret: '88000ea51dfa6cdd0a09617c30e0cdbd7397a981',
    repo: 'yzddahaoren.github.io',
    owner: 'yzddahaoren',
    admin: ['yzddahaoren'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

      </div>
    </div>

    <script src="/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
